{
  "info": {
    "name": "Telegram Store MVP API",
    "description": "Postman коллекция для тестирования REST API Telegram-магазина",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "12345678"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000/api/v1",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "product_id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "order_id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "123456789",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login (Get Access Token)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"access_token\", jsonData.access_token);",
                  "    console.log(\"Access token saved:\", jsonData.access_token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "username",
                  "value": "admin",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "admin123",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/auth/token",
              "host": ["{{base_url}}"],
              "path": ["auth", "token"]
            },
            "description": "Аутентификация администратора и получение JWT access token"
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"access_token\", jsonData.access_token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["auth", "refresh"]
            },
            "description": "Обновление access token используя refresh token из cookie"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Products (Public)",
      "item": [
        {
          "name": "Get Products List",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/products?page=1&size=10",
              "host": ["{{base_url}}"],
              "path": ["products"],
              "query": [
                {
                  "key": "category_id",
                  "value": "1",
                  "disabled": true
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            },
            "description": "Получить пагинированный список активных продуктов"
          },
          "response": []
        },
        {
          "name": "Get Product by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Product has variants\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.variants).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/products/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["products", "{{product_id}}"]
            },
            "description": "Получить детальную информацию о продукте с вариантами"
          },
          "response": []
        },
        {
          "name": "Get Categories",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/categories",
              "host": ["{{base_url}}"],
              "path": ["categories"]
            },
            "description": "Получить список всех категорий"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Create Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"order_id\", jsonData.id);",
                  "    console.log(\"Order created with ID:\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": 123456789,\n  \"user_details\": {\n    \"full_name\": \"Иван Иванов\",\n    \"phone_number\": \"+79991234567\"\n  },\n  \"shipping_address\": \"123456, г. Москва, ул. Примерная, д. 1, кв. 10\",\n  \"items\": [\n    {\n      \"variant_id\": 101,\n      \"quantity\": 2\n    },\n    {\n      \"variant_id\": 102,\n      \"quantity\": 1\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/orders",
              "host": ["{{base_url}}"],
              "path": ["orders"]
            },
            "description": "Создать новый заказ"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin - Orders",
      "item": [
        {
          "name": "Get All Orders",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/orders?page=1&size=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "orders"],
              "query": [
                {
                  "key": "status",
                  "value": "pending",
                  "disabled": true
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Получить список всех заказов (требуется аутентификация)"
          },
          "response": []
        },
        {
          "name": "Get Order by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/orders/{{order_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "orders", "{{order_id}}"]
            },
            "description": "Получить детальную информацию о заказе"
          },
          "response": []
        },
        {
          "name": "Update Order Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"shipped\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/orders/{{order_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "orders", "{{order_id}}"]
            },
            "description": "Обновить статус заказа"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin - Products",
      "item": [
        {
          "name": "Get All Products (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/products?page=1&size=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "products"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Получить все продукты включая неактивные"
          },
          "response": []
        },
        {
          "name": "Create Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"product_id\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Новая футболка\",\n  \"description\": \"Удобная хлопковая футболка\",\n  \"category_id\": 1,\n  \"is_active\": true,\n  \"variants\": [\n    {\n      \"sku\": \"TSHIRT-RED-M\",\n      \"price\": 1999.00,\n      \"stock_quantity\": 50,\n      \"attributes\": [\n        {\"type\": \"Color\", \"value\": \"Красный\"},\n        {\"type\": \"Size\", \"value\": \"M\"}\n      ]\n    },\n    {\n      \"sku\": \"TSHIRT-BLUE-L\",\n      \"price\": 2199.00,\n      \"stock_quantity\": 30,\n      \"attributes\": [\n        {\"type\": \"Color\", \"value\": \"Синий\"},\n        {\"type\": \"Size\", \"value\": \"L\"}\n      ]\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/products",
              "host": ["{{base_url}}"],
              "path": ["admin", "products"]
            },
            "description": "Создать новый продукт с вариантами"
          },
          "response": []
        },
        {
          "name": "Update Product",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Обновленная футболка\",\n  \"description\": \"Обновленное описание\",\n  \"category_id\": 1,\n  \"is_active\": true,\n  \"variants\": [\n    {\n      \"sku\": \"TSHIRT-RED-M\",\n      \"price\": 1899.00,\n      \"stock_quantity\": 45,\n      \"attributes\": [\n        {\"type\": \"Color\", \"value\": \"Красный\"},\n        {\"type\": \"Size\", \"value\": \"M\"}\n      ]\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/products/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "products", "{{product_id}}"]
            },
            "description": "Обновить существующий продукт"
          },
          "response": []
        },
        {
          "name": "Delete Product",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/products/{{product_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "products", "{{product_id}}"]
            },
            "description": "Удалить продукт и все его варианты"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin - Users",
      "item": [
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/users?page=1&size=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Получить список всех пользователей"
          },
          "response": []
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["admin", "users", "{{user_id}}"]
            },
            "description": "Получить детальную информацию о пользователе"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin - Import/Export",
      "item": [
        {
          "name": "Import Products from CSV",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/products.csv"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/admin/import/csv",
              "host": ["{{base_url}}"],
              "path": ["admin", "import", "csv"]
            },
            "description": "Импортировать продукты из CSV файла"
          },
          "response": []
        },
        {
          "name": "Import Products from XLSX",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/products.xlsx"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/admin/import/xlsx",
              "host": ["{{base_url}}"],
              "path": ["admin", "import", "xlsx"]
            },
            "description": "Импортировать продукты из XLSX файла"
          },
          "response": []
        },
        {
          "name": "Import from Google Sheets",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"spreadsheet_url\": \"https://docs.google.com/spreadsheets/d/1ABC.../edit\",\n  \"sheet_name\": \"Products\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/import/google-sheets",
              "host": ["{{base_url}}"],
              "path": ["admin", "import", "google-sheets"]
            },
            "description": "Импортировать продукты из Google Sheets"
          },
          "response": []
        },
        {
          "name": "Export Orders to CSV",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/export/csv?start_date=2025-11-01&end_date=2025-11-30",
              "host": ["{{base_url}}"],
              "path": ["admin", "export", "csv"],
              "query": [
                {
                  "key": "start_date",
                  "value": "2025-11-01"
                },
                {
                  "key": "end_date",
                  "value": "2025-11-30"
                }
              ]
            },
            "description": "Экспортировать заказы в CSV файл"
          },
          "response": []
        },
        {
          "name": "Export Orders to XLSX",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/export/xlsx?start_date=2025-11-01&end_date=2025-11-30",
              "host": ["{{base_url}}"],
              "path": ["admin", "export", "xlsx"],
              "query": [
                {
                  "key": "start_date",
                  "value": "2025-11-01"
                },
                {
                  "key": "end_date",
                  "value": "2025-11-30"
                }
              ]
            },
            "description": "Экспортировать заказы в XLSX файл"
          },
          "response": []
        },
        {
          "name": "Export to Google Sheets",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"start_date\": \"2025-11-01\",\n  \"end_date\": \"2025-11-30\",\n  \"spreadsheet_url\": \"https://docs.google.com/spreadsheets/d/1XYZ.../edit\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/export/google-sheets",
              "host": ["{{base_url}}"],
              "path": ["admin", "export", "google-sheets"]
            },
            "description": "Экспортировать заказы в Google Sheets"
          },
          "response": []
        }
      ]
    }
  ]
}
