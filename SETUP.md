# ðŸš€ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Telegram Shop MVP

## ðŸ“‹ ÐžÐ³Ð»Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ

- [Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ](#ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ-Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ)
- [ÐœÐµÑ‚Ð¾Ð´ 1: Docker Compose (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)](#Ð¼ÐµÑ‚Ð¾Ð´-1-docker-compose-Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
- [ÐœÐµÑ‚Ð¾Ð´ 2: Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð°Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°](#Ð¼ÐµÑ‚Ð¾Ð´-2-Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð°Ñ-Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°)
- [ÐœÐµÑ‚Ð¾Ð´ 3: Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° Ubuntu ÑÐµÑ€Ð²ÐµÑ€Ðµ](#Ð¼ÐµÑ‚Ð¾Ð´-3-Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ-Ð½Ð°-ubuntu-ÑÐµÑ€Ð²ÐµÑ€Ðµ)
- [ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº](#Ð¿ÐµÑ€Ð²Ñ‹Ð¹-Ð·Ð°Ð¿ÑƒÑÐº)
- [ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹](#Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°-Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹)
- [ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ](#Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°-Ð¸-ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ)

## ðŸ’» Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

### ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- **CPU:** 2 ÑÐ´Ñ€Ð°
- **RAM:** 2GB
- **Ð”Ð¸ÑÐº:** 10GB ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¼ÐµÑÑ‚Ð°
- **ÐžÐ¡:** Ubuntu 20.04+ / Debian 11+ / macOS / Windows 10+

### ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð½Ð¾Ðµ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡ÐµÐ½Ð¸Ðµ

#### Ð”Ð»Ñ Docker Ð¼ÐµÑ‚Ð¾Ð´Ð°:
- Docker 20.10+
- Docker Compose 2.0+

#### Ð”Ð»Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸:
- Node.js 18+ (LTS)
- Yarn 4+
- PostgreSQL 15+
- Git

### ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Telegram Bot Token

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Telegram Ð¸ Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ [@BotFather](https://t.me/botfather)
2. ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ `/newbot`
3. Ð¡Ð»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼ (Ð¸Ð¼Ñ Ð±Ð¾Ñ‚Ð°, username)
4. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ð²Ð¸Ð´Ð°: `1234567890:ABCdefGhIjKlmNoPqRsTuVwXyZ`
5. Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ð´Ð»Ñ Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐµÐ¹ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸

---

## ðŸ“¦ ÐœÐµÑ‚Ð¾Ð´ 1: Docker Compose (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

Ð¡Ð°Ð¼Ñ‹Ð¹ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ð¸ Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± Ð·Ð°Ð¿ÑƒÑÐºÐ°.

### Ð¨Ð°Ð³ 1: Ð Ð°ÑÐ¿Ð°ÐºÐ¾Ð²ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```bash
# Ð Ð°ÑÐ¿Ð°ÐºÐ¾Ð²Ð°Ñ‚ÑŒ Ð°Ñ€Ñ…Ð¸Ð²
tar -xzf telegram_shop_backend.tar.gz

# ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
cd telegram_shop_backend
```

### Ð¨Ð°Ð³ 2: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° environment variables

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ .env Ð¸Ð· Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð°
cp .env.example .env

# Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ .env
nano .env
```

**Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ .env:**

```env
# Backend API
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/telegram_shop?schema=public
PORT=3000
JWT_SECRET=your-super-secret-jwt-key-change-in-production-minimum-32-characters
JWT_EXPIRES_IN=30m
NODE_ENV=production

# Telegram Bot
BOT_TOKEN=Ð²Ð°Ñˆ_telegram_bot_token_Ð·Ð´ÐµÑÑŒ
ADMIN_TELEGRAM_IDS=123456789,987654321

# Optional: CORS origins (comma-separated)
CORS_ORIGIN=*

# Optional: Analytics
# GA4_MEASUREMENT_ID=G-XXXXXXXXXX
# YANDEX_METRIKA_ID=12345678
```

**Ð’Ð°Ð¶Ð½Ð¾:**
- Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ `BOT_TOKEN` Ð½Ð° Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½ Ð¾Ñ‚ @BotFather
- Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Telegram ID Ð² `ADMIN_TELEGRAM_IDS` (ÑƒÐ·Ð½Ð°Ñ‚ÑŒ: [@userinfobot](https://t.me/userinfobot))
- ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÑÐ¼ÐµÐ½Ð¸Ñ‚Ðµ `JWT_SECRET` Ð½Ð° ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 32 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°

### Ð¨Ð°Ð³ 3: Ð—Ð°Ð¿ÑƒÑÐº

```bash
# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹
docker-compose up -d

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ
docker-compose ps

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
docker-compose logs -f
```

**Ð§Ñ‚Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑÑ:**
- PostgreSQL Ð±Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð¿Ð¾Ñ€Ñ‚ 5432)
- Backend API (Ð¿Ð¾Ñ€Ñ‚ 3000)
- Telegram Bot

### Ð¨Ð°Ð³ 4: Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…

Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¾Ð·Ð´Ð°ÑÑ‚ÑÑ Ð¸ Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑÑ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð·Ð°Ð¿ÑƒÑÐºÐµ API.

**Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð²ÐºÐ»ÑŽÑ‡Ð°ÑŽÑ‚:**
- ÐÐ´Ð¼Ð¸Ð½: `username: admin`, `password: admin123`
- 10 Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² Ñ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð°Ð¼Ð¸
- 3 ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸

---

## ðŸ› ï¸ ÐœÐµÑ‚Ð¾Ð´ 2: Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð°Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°

Ð”Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¼ Ð½ÑƒÐ¶ÐµÐ½ Ð¿Ñ€ÑÐ¼Ð¾Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÐºÐ¾Ð´Ñƒ.

### Ð¨Ð°Ð³ 1: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹

#### macOS (Ñ Homebrew):

```bash
# Node.js
brew install node@18

# Yarn
npm install -g yarn

# PostgreSQL
brew install postgresql@15
brew services start postgresql@15
```

#### Ubuntu/Debian:

```bash
# Node.js 18 LTS
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# Yarn
npm install -g yarn

# PostgreSQL 15
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
sudo apt-get update
sudo apt-get install -y postgresql-15
```

#### Windows:

1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ [Node.js 18 LTS](https://nodejs.org/)
2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ [PostgreSQL 15](https://www.postgresql.org/download/windows/)
3. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ PowerShell Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ: `npm install -g yarn`

### Ð¨Ð°Ð³ 2: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° PostgreSQL

```bash
# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº PostgreSQL
sudo -u postgres psql

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…
CREATE DATABASE telegram_shop;
CREATE USER shopuser WITH PASSWORD 'shoppassword';
GRANT ALL PRIVILEGES ON DATABASE telegram_shop TO shopuser;

# Ð’Ñ‹Ñ…Ð¾Ð´
\q
```

### Ð¨Ð°Ð³ 3: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Backend API

```bash
cd telegram_shop_backend/nodejs_space

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
yarn install

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ .env
cat > .env << 'EOF'
DATABASE_URL=postgresql://shopuser:shoppassword@localhost:5432/telegram_shop?schema=public
PORT=3000
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=30m
NODE_ENV=development
CORS_ORIGIN=*
EOF

# ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÑÑ…ÐµÐ¼Ñƒ Ð‘Ð”
yarn prisma db push

# Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸
yarn prisma db seed

# Ð¡ÐºÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ
yarn build

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð² dev Ñ€ÐµÐ¶Ð¸Ð¼Ðµ
yarn start:dev

# Ð˜Ð»Ð¸ Ð² production Ñ€ÐµÐ¶Ð¸Ð¼Ðµ
yarn start:prod
```

API Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð½Ð° http://localhost:3000

### Ð¨Ð°Ð³ 4: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Telegram Bot

**ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»:**

```bash
cd telegram_shop_backend/bot

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
yarn install

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ .env
cat > .env << 'EOF'
BOT_TOKEN=Ð²Ð°Ñˆ_telegram_bot_token_Ð·Ð´ÐµÑÑŒ
API_BASE_URL=http://localhost:3000/api
API_TIMEOUT=10000
ADMIN_TELEGRAM_IDS=123456789
NODE_ENV=development
LOG_LEVEL=debug
EOF

# Ð¡ÐºÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ
yarn build

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð² dev Ñ€ÐµÐ¶Ð¸Ð¼Ðµ
yarn dev

# Ð˜Ð»Ð¸ Ð² production Ñ€ÐµÐ¶Ð¸Ð¼Ðµ
yarn start
```

### Ð¨Ð°Ð³ 5: Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°Ð¼Ð¸ Ñ PM2 (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

PM2 Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹ Ð² Ñ„Ð¾Ð½Ðµ Ñ Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð¼.

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ PM2
npm install -g pm2

# Backend API
cd telegram_shop_backend/nodejs_space
pm2 start dist/main.js --name telegram-shop-api

# Telegram Bot
cd ../bot
pm2 start dist/index.js --name telegram-shop-bot

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
pm2 logs

# ÐÐ²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ
pm2 startup
pm2 save

# Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ
pm2 restart telegram-shop-api
pm2 stop telegram-shop-bot
pm2 delete telegram-shop-api
```

---

## ðŸŒ ÐœÐµÑ‚Ð¾Ð´ 3: Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° Ubuntu ÑÐµÑ€Ð²ÐµÑ€Ðµ

ÐŸÐ¾Ð»Ð½Ð¾Ñ†ÐµÐ½Ð½Ð¾Ðµ production Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° VPS/dedicated ÑÐµÑ€Ð²ÐµÑ€Ðµ.

### ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- Ubuntu 20.04+ ÑÐµÑ€Ð²ÐµÑ€
- Ð”Ð¾ÑÑ‚ÑƒÐ¿ Ð¿Ð¾ SSH
- Ð”Ð¾Ð¼ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð¼Ñ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾, Ð´Ð»Ñ HTTPS)
- ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 2GB RAM

### Ð¨Ð°Ð³ 1: ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°

```bash
# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
sudo apt update && sudo apt upgrade -y

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ docker
sudo usermod -aG docker $USER

# ÐŸÐµÑ€ÐµÐ»Ð¾Ð³Ð¸Ð½Ð¸Ñ‚ÑŒÑÑ Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹
exit
# SSH ÑÐ½Ð¾Ð²Ð°

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸
docker --version
docker-compose --version
```

### Ð¨Ð°Ð³ 2: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
mkdir -p ~/apps
cd ~/apps

# Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚ (Ñ‡ÐµÑ€ÐµÐ· SCP Ð¸Ð»Ð¸ Git)
# Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: SCP Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ð°
# scp telegram_shop_backend.tar.gz user@your-server-ip:~/apps/

# Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: Wget ÐµÑÐ»Ð¸ Ñ„Ð°Ð¹Ð» Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ
# wget https://your-domain.com/telegram_shop_backend.tar.gz

# Ð Ð°ÑÐ¿Ð°ÐºÐ¾Ð²Ð°Ñ‚ÑŒ
tar -xzf telegram_shop_backend.tar.gz
cd telegram_shop_backend
```

### Ð¨Ð°Ð³ 3: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° .env

```bash
nano .env
```

**Production .env:**

```env
DATABASE_URL=postgresql://postgres:YourStrongPassword123@postgres:5432/telegram_shop?schema=public
PORT=3000
JWT_SECRET=your-production-secret-min-32-chars-random-string-here
JWT_EXPIRES_IN=30m
NODE_ENV=production
CORS_ORIGIN=https://yourdomain.com

BOT_TOKEN=Ð²Ð°Ñˆ_Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹_telegram_bot_token
ADMIN_TELEGRAM_IDS=Ð²Ð°Ñˆ_telegram_id

# Analytics (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
GA4_MEASUREMENT_ID=G-XXXXXXXXXX
YANDEX_METRIKA_ID=12345678
```

### Ð¨Ð°Ð³ 4: Ð—Ð°Ð¿ÑƒÑÐº Ñ Docker Compose

```bash
# Ð—Ð°Ð¿ÑƒÑÐº
docker-compose up -d

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°
docker-compose ps
docker-compose logs -f api
docker-compose logs -f bot

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° API
curl http://localhost:3000/api/products
```

### Ð¨Ð°Ð³ 5: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Nginx (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

Ð”Ð»Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ð¿Ð¾ Ð´Ð¾Ð¼ÐµÐ½Ð½Ð¾Ð¼Ñƒ Ð¸Ð¼ÐµÐ½Ð¸.

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Nginx
sudo apt install nginx -y

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³
sudo nano /etc/nginx/sites-available/telegram-shop
```

**Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð°:**

```nginx
server {
    listen 80;
    server_name your-domain.com www.your-domain.com;

    # Redirect to HTTPS (Ð¿Ð¾ÑÐ»Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ SSL)
    # return 301 https://$server_name$request_uri;

    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    location /api-docs {
        proxy_pass http://localhost:3000/api-docs;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
    }
}
```

```bash
# ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³
sudo ln -s /etc/nginx/sites-available/telegram-shop /etc/nginx/sites-enabled/

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
sudo nginx -t

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Nginx
sudo systemctl restart nginx

# Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº
sudo systemctl enable nginx
```

### Ð¨Ð°Ð³ 6: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° SSL Ñ Let's Encrypt

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Certbot
sudo apt install certbot python3-certbot-nginx -y

# ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚
sudo certbot --nginx -d your-domain.com -d www.your-domain.com

# ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°
sudo systemctl status certbot.timer
```

ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ SSL Ñ€Ð°ÑÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ñ€Ð¾ÐºÑƒ redirect Ð² Nginx ÐºÐ¾Ð½Ñ„Ð¸Ð³Ðµ.

### Ð¨Ð°Ð³ 7: ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¸ Ð»Ð¾Ð³Ð¸

```bash
# Ð›Ð¾Ð³Ð¸ Docker
docker-compose logs -f

# Ð›Ð¾Ð³Ð¸ Nginx
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
docker-compose ps
sudo systemctl status nginx
```

---

## ðŸŽ¬ ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº

ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð»ÑŽÐ±Ñ‹Ð¼ Ð¼ÐµÑ‚Ð¾Ð´Ð¾Ð¼:

### 1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° API

```bash
# Health check
curl http://localhost:3000/api

# Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²
curl http://localhost:3000/api/products

# ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸
curl http://localhost:3000/api/categories

# Swagger Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ
# ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ: http://localhost:3000/api-docs
```

### 2. ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ JWT Ñ‚Ð¾ÐºÐµÐ½Ð° Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½ÐºÐ¸

```bash
curl -X POST http://localhost:3000/api/auth/token \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
```

**ÐžÑ‚Ð²ÐµÑ‚:**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "username": "admin",
    "email": "admin@example.com",
    "role": "admin"
  }
}
```

### 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Telegram Ð±Ð¾Ñ‚Ð°

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Telegram
2. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð±Ð¾Ñ‚Ð° (Ð¿Ð¾ username)
3. ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ `/start`
4. Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑŒÑÑ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ñ Ð¼ÐµÐ½ÑŽ

**Ð•ÑÐ»Ð¸ Ð±Ð¾Ñ‚ Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚:**

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð±Ð¾Ñ‚Ð°
docker-compose logs bot
# Ð¸Ð»Ð¸
pm2 logs telegram-shop-bot
```

---

## âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹

### Checklist

- [ ] API Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000
- [ ] Swagger Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ
- [ ] PostgreSQL Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½
- [ ] Telegram Ð±Ð¾Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð½Ð° `/start`
- [ ] ÐœÐ¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ JWT Ñ‚Ð¾ÐºÐµÐ½ Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð°
- [ ] Endpoint `/api/products` Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹
- [ ] ÐœÐ¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³ Ð² Ð±Ð¾Ñ‚Ðµ
- [ ] ÐœÐ¾Ð¶Ð½Ð¾ Ð¾Ñ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ñ‡ÐµÑ€ÐµÐ· Ð±Ð¾Ñ‚Ð°

### Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹

```bash
# 1. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‚Ð¾ÐºÐµÐ½
TOKEN=$(curl -s -X POST http://localhost:3000/api/auth/token \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}' \
  | jq -r '.access_token')

# 2. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹ (admin)
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:3000/api/admin/products

# 3. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ‚Ð¾Ð²Ð°Ñ€
curl -X POST http://localhost:3000/api/admin/products \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test Product",
    "description": "This is a test product",
    "category_id": 1,
    "is_active": true
  }'

# 4. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·Ñ‹
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:3000/api/admin/orders
```

---

## ðŸ›‘ ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ

### Docker Compose

```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹
docker-compose stop

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹
docker-compose down

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹ + volumes (Ð‘Ð” Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°!)
docker-compose down -v

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²Ð¸ÑÑ‹
docker-compose restart

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²Ð¸Ñ
docker-compose restart api
docker-compose restart bot

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
docker-compose logs -f
docker-compose logs -f api
docker-compose logs -f bot

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
docker-compose ps

# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹
docker-compose up -d --build
```

### PM2

```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ
pm2 stop telegram-shop-api
pm2 stop telegram-shop-bot

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
pm2 restart telegram-shop-api
pm2 restart telegram-shop-bot

# Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ
pm2 delete telegram-shop-api
pm2 delete telegram-shop-bot

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð²ÑÐµÑ… Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð²
pm2 list

# ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
pm2 monit

# Ð›Ð¾Ð³Ð¸
pm2 logs telegram-shop-api
pm2 logs telegram-shop-bot
```

---

## ðŸ”§ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²Ð¸ÑÑ‹
docker-compose down

# Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð¾Ð±Ñ€Ð°Ð·Ñ‹
docker-compose rm -f

# ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
docker-compose up -d --build

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker-compose logs -f
```

---

## ðŸ“š Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÑÑƒÑ€ÑÑ‹

- [ARCHITECTURE.md](./ARCHITECTURE.md) - Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
- [API_DOCUMENTATION.md](./API_DOCUMENTATION.md) - Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ API endpoints
- [BOT_LOGIC.md](./BOT_LOGIC.md) - Ð»Ð¾Ð³Ð¸ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð±Ð¾Ñ‚Ð°
- [TROUBLESHOOTING.md](./TROUBLESHOOTING.md) - Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼
- [DEVELOPMENT.md](./DEVELOPMENT.md) - Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ°

---

**ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾:** 2025-12-04  
**Ð’ÐµÑ€ÑÐ¸Ñ:** 1.0.0
